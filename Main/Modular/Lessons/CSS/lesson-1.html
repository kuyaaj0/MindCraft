<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MindCraft â€” Lessons Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}

/* ===== WORLD BACKGROUND ===== */
body{
  font-family:'Press Start 2P', cursive;
  background:linear-gradient(#87e4ff,#c8f7b0);
  padding:20px;
  overflow:hidden;
  font-size:10px;
}

/* ===== EXIT BUTTON ===== */
.exit-btn{
  position:fixed;
  top:28px;
  left:28px;
  background:#ff4d4d;
  color:#fff;
  text-decoration:none;
  font-family:'Press Start 2P';
  padding:6px 10px;
  border-radius:8px;
  box-shadow: inset -2px -2px 0 rgba(0,0,0,.25), 0 3px 0 #a30000;
  z-index:1000;
  font-size:9px;
  transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
}
.exit-btn:hover{
  transform:translateY(-2px);
  box-shadow: inset -2px -2px 0 rgba(0,0,0,.25), 0 5px 0 #a30000;
}

/* ===== MAIN APP ===== */
.app{
  max-width:1200px;
  margin:0 auto;
  height:calc(100vh - 40px);
  background:linear-gradient(#8fe9ff 55%, #7dd37d);
  border-radius:24px;
  box-shadow:0 30px 70px rgba(0,0,0,.45);
  display:grid;
  grid-template-columns:260px 1fr;
  gap:18px;
  padding:18px;
}

/* ===== SIDEBAR ===== */
.sidebar{
  background:#8b5a2b;
  border-radius:18px;
  padding:18px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,.25),
    0 8px 0 #5c3a1a;
  color:#fff;
  display:flex;
  flex-direction:column;
  overflow-y: auto;
}

.brand h1{
  font-size:14px;
  text-align:center;
  text-shadow:2px 2px #000;
}
.brand p{
  font-size:8px;
  text-align:center;
  opacity:.9;
  margin-top:6px;
}

/* ===== LESSON BUTTONS ===== */
.lessons-list{
  margin-top:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.lessons-list button{
  background:#a56b34;
  border:none;
  padding:12px;
  border-radius:12px;
  cursor:pointer;
  color:#fff;
  font-size:9px;
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:center;
  box-shadow:
    inset -4px -4px 0 rgba(0,0,0,.25),
    0 5px 0 #5c3a1a;
}

.lessons-list button:hover{
  transform:translateY(-2px);
}

.lessons-list button.active{
  background:#c98b4a;
}

.num{
  background:#ffd966;
  color:#000;
  padding:4px 6px;
  border-radius:6px;
}

.parts-buttons{
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-top:8px;
  margin-left:12px;
}

.parts-buttons button{
  font-size:8px;
  padding:8px 12px;
  justify-content:flex-start;
  background:#8a5a2a;
}

.parts-buttons button:hover{
  background:#9a6a3a;
}

/* ===== CONTENT ===== */
.content{
  background:#e8f4ff;
  border-radius:18px;
  padding:16px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,.15),
    0 8px 0 #6fa8dc;
  display:flex;
  flex-direction:column;
}

/* ===== HEADER ===== */
.content-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

.content-head .title{
  font-size:12px;
  text-shadow:2px 2px #fff;
}

/* ===== NAV BUTTONS ===== */
.content-head .nav-buttons {
  display:flex;
  gap:8px;
  align-items:center;
}

.content-head button.arrow-btn{
  font-family:'Press Start 2P';
  background:#4e91ff;
  color:#fff;
  border:3px solid #1f4fb8;
  padding:6px 10px;
  border-radius:8px;
  box-shadow:
    0 3px 0 #16347a,
    0 4px 0 #0c1b3a;
  cursor:pointer;
  font-size:8px;
  transition:transform 0.1s, box-shadow 0.1s, background 0.1s;
}

.content-head button.arrow-btn:hover{
  transform:translateY(-2px);
  background:#6aa7ff;
  box-shadow:
    0 5px 0 #16347a,
    0 6px 0 #0c1b3a;
}

.content-head button.arrow-btn:active{
  transform:translateY(1px);
  background:#3f7aed;
  box-shadow:
    0 1px 0 #16347a,
    0 2px 0 #0c1b3a;
}

/* ===== PANELS ===== */
.panel-wrap{
  flex:1;
  position:relative;
}

.lesson-panel{
  position:absolute;
  inset:0;
  padding:16px;
  overflow:auto;
  display:none;
}

.lesson-panel.visible{display:block}

/* ===== LESSON CONTENT ===== */
.lesson-panel h1{
  font-size:14px;
  margin-bottom:6px;
}

.lesson-panel h2{
  font-size:11px;
  margin-bottom:8px;
}

.meta{
  font-size:8px;
  opacity:.7;
  margin-bottom:16px;
}

/* ===== BOXES ===== */
.explain{
  background:#fff3cd;
  border:3px solid #c9a227;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  line-height:1.6;
  font-size:9px;
}

.code{
  background:#1e1e1e;
  color:#00ff90;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  overflow:auto;
  position:relative;
  font-size:8px;
}

.code pre{
  white-space:pre-wrap;
  word-break:break-word;
  margin:0;
}

.demo{
  background:#d9ead3;
  border:3px solid #6aa84f;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  font-size:9px;
}

.examples{
  margin-left:16px;
}

.examples li{
  margin:6px 0;
}

/* ===== EDIT BUTTON ===== */
.code .edit-btn{
  position:absolute;
  top:10px;
  right:10px;
  background:#5c3a1a;
  color:#fff;
  border:none;
  padding:6px 8px;
  border-radius:8px;
  font-size:8px;
  cursor:pointer;
  box-shadow:0 4px 0 #3e2814;
  font-family:'Press Start 2P';
}

.code .edit-btn:hover{
  transform:translateY(-2px);
}

/* ===== EDITOR MODAL ===== */
#editorModal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.5);
  z-index:1200;
}
#editorModal .modal{
  width:min(950px,95%);
  height:min(700px,95%);
  background:#0b1020;
  border-radius:12px;
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:8px;
  color:#e6f7ff;
  box-shadow:0 10px 40px rgba(0,0,0,.6);
  font-family:monospace;
}
#editorModal header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}
#editorModal .controls{display:flex;gap:8px;align-items:center;}
#editorModal button{
  font-family:'Press Start 2P';
}
#editorModal textarea{
  width:100%;
  height:280px;
  background:#071018;
  color:#cfeefd;
  border:1px solid #27455b;
  padding:10px;
  border-radius:8px;
  resize:vertical;
  font-family:monospace;
  font-size:12px;
  line-height:1.4;
}
#editorModal .bottom{
  display:flex;
  gap:12px;
}
#editorModal .preview{
  flex:1;
  border:1px solid #27455b;
  border-radius:8px;
  overflow:hidden;
}
#errorBox{
  background:#3a1b1b;
  color:#ffd6d6;
  padding:8px;
  border-radius:6px;
  display:none;
  font-size:12px;
}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
  .app{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
  }
  #editorModal .modal{height:86vh}
}
</style>
</head>

<body>
<div class="app">

<aside class="sidebar">
  <div class="brand">
    <h1>ðŸ§  MindCraft</h1>
    <p>CSS Lesson 01</p>
  </div>

  <div class="lessons-list">
    <!-- ===== LESSON 1 WITH PARTS DISPLAYED ===== -->
    <button data-lesson="lesson-1-1" style="display:flex; align-items:center; justify-content:center;">
      <span><span class="num">01</span> Cyberpunk Style Matrix</span>
    </button>

    <div class="parts-buttons">
      <button data-lesson="lesson-1-1">01. CSS Rule Anatomy</button>
      <button data-lesson="lesson-1-2">02. Selector Types</button>
      <button data-lesson="lesson-1-3">03. How CSS Works</button>
      <button data-lesson="lesson-1-4">04. CSS Comments</button>
      <button data-lesson="lesson-1-5">05. How CSS Finds HTML</button>
      <button data-lesson="lesson-1-6">06. Your First CSS Challenge!</button>
    </div>
  </div>
</aside>

<main class="content">
  <div class="content-head">
    <a href="../../../Webside/Student.html" class="exit-btn" aria-label="Exit lessons">EXIT</a>
    <div class="title" id="panel-title">01 â€¢ CSS Basics</div>
    <div class="nav-buttons">
      <button id="prevLesson" class="arrow-btn" aria-label="Previous lesson">â—€</button>
      <button id="nextLesson" class="arrow-btn" aria-label="Next lesson">â–¶</button>
    </div>
  </div>

  <div class="panel-wrap">
    <!-- ===== LESSON 1 PANELS ===== -->
    <article id="lesson-1-1" class="lesson-panel">
      <h1>Cyberpunk Style Matrix</h1>
      <div class="meta">Lesson 1 â€¢ Part 1</div>
      <h2>01. CSS Rule Anatomy</h2>
      <div class="explain"></div>
    </article>

    <article id="lesson-1-2" class="lesson-panel">
      <h1>Cyberpunk Style Matrix</h1>
      <div class="meta">Lesson 1 â€¢ Part 2</div>
      <h2>02. Selector Types</h2>
      <div class="explain"></div>
    </article>

    <article id="lesson-1-3" class="lesson-panel">
      <h1>Cyberpunk Style Matrix</h1>
      <div class="meta">Lesson 1 â€¢ Part 3</div>
      <h2>03. How CSS Works</h2>
      <div class="explain"></div>
    </article>

    <article id="lesson-1-4" class="lesson-panel">
      <h1>Cyberpunk Style Matrix</h1>
      <div class="meta">Lesson 1 â€¢ Part 4</div>
      <h2>04. CSS Comments</h2>
      <div class="explain"></div>
    </article>

    <article id="lesson-1-5" class="lesson-panel">
      <h1>Cyberpunk Style Matrix</h1>
      <div class="meta">Lesson 1 â€¢ Part 5</div>
      <h2>05. How CSS Finds HTML</h2>
      <div class="explain"></div>
    </article>

    <article id="lesson-1-6" class="lesson-panel">
      <h1>Cyberpunk Style Matrix</h1>
      <div class="meta">Lesson 1 â€¢ Part 6</div>
      <h2>06. Your First CSS Challenge!</h2>
      <div class="explain"></div>
    </article>
  </div>
</main>
</div>
 
<!-- EDITOR MODAL -->
<div id="editorModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-label="Code editor">
    <header>
      <div>
        <strong id="modalTitle">Edit Code</strong>
        <div id="errorBox"></div>
      </div>
      <div class="controls">
        <button id="applyBtn">Apply</button>
        <button id="closeEditor">Close</button>
      </div>
    </header>
    <textarea id="codeEditor" spellcheck="false"></textarea>
    <div style="display:flex;gap:8px;flex:1;min-height:220px;">
      <div style="flex:1;">
        <strong style="font-size:12px">Live Preview</strong>
        <div class="preview"><iframe id="previewFrame" style="width:100%;height:100%;border:0"></iframe></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== LESSON 1 CONTENT ONLY ===== */
const lessonContent = {
  "lesson-1-1": `
    <div class="explain">
      CSS = <strong>SELECTOR { PROPERTY: VALUE; }</strong><br><br>
      <strong>Selector</strong> = HTML target (h1, .class, #id)<br>
      <strong>Property</strong> = what to change (color, font-size)<br>
      <strong>Value</strong> = how to change it (red, 24px)
    </div>
    <div class="code">
<pre>h1 {                    /* SELECTOR */
    color: #ff00ff;      /* PROPERTY: VALUE */
    font-size: 48px;     /* PROPERTY: VALUE */
}</pre>
    </div>
  `,
  "lesson-1-2": `
    <p>CSS selectors tell the browser <strong>which HTML elements</strong> to target.</p>
    <div class="code">
<pre>/* Element selector */
p { color: #00aaff; }

/* Class selector */
.card { background:#111; color:#0ff; padding:12px; }

/* ID selector */
#hero { font-size:24px; color:#ff66cc; }</pre>
    </div>
    <div class="demo">
      <p>Try the examples:</p>
      <div class="card" style="margin-top:8px;padding:10px;border-radius:8px;background:#111;color:#0ff;">.card demo box</div>
      <p id="hero" style="margin-top:8px;font-size:16px;color:#ff66cc;">#hero demo</p>
    </div>
  `,
  "lesson-1-3": `
    <p>Watch plain HTML transform with CSS! Same content, different styles.</p>
    <div class="code">
<pre>/* Add neon outline to headings */
h3 { color:#ffcc00; text-shadow:0 0 8px rgba(255,204,0,0.6); }

/* Style paragraph */
p.notice { color:#00ffcc; font-weight:bold; }</pre>
    </div>

    <div class="demo">
      <h3 style="color:#ffcc00;text-shadow:0 0 8px rgba(255,204,0,0.6);margin:0;">Example Heading</h3>
      <p class="notice" style="color:#00ffcc;font-weight:bold;margin:8px 0 0 0;">This paragraph uses class "notice".</p>
    </div>
  `,
  "lesson-1-4": `
    <p>Use <strong>/* comments */</strong> to explain code. Browsers ignore everything between /* and */.</p>
    <div class="code">
<pre>/* This styles the main heading */
h1 {
    color: #ff00ff;     /* Magenta color */
    font-size: 4em;     /* Extra large text */
}

/* Navigation menu styles */
nav {
    background: #000;   /* Pure black */
}</pre>
    </div>

    <div class="demo">
      <strong style="display:block;margin-bottom:8px">Live Preview</strong>
      <iframe class="inline-preview" style="width:100%;height:220px;border:1px solid #27455b;border-radius:8px"></iframe>
    </div>
  `,
  "lesson-1-5": `
    <p>CSS scans HTML â†’ finds matching <strong>selectors</strong> â†’ applies styles.<br>
    Inline styles &gt; Internal &gt; External CSS (priority order).</p>
    <div class="code">
<pre>/* Inline example */
/* (in HTML) &lt;p style='color:red'&gt;... &lt;/p&gt; */

/* Internal CSS example (in &lt;style&gt;) */
.box { padding:12px; background:#222; color:#0ff; }</pre>
    </div>
    <div class="demo">
      <p style="color: red;margin:0;">RED = Inline style (highest priority)</p>
      <div class="box" style="margin-top:8px;padding:8px;background:#222;color:#0ff;border-radius:8px;">Internal CSS demo</div>
    </div>
  `,
  "lesson-1-6": `
    <p>Style this CMU card! Change colors, add shadows, make it cyberpunk!</p>
    <div class="code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
/* YOUR CSS HERE! */
.cmu-card {
    border-radius:10px;
    padding:12px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="cmu-card"&gt;
    &lt;h2&gt;CMU IT Student&lt;/h2&gt;
    &lt;p&gt;Learning cyberpunk CSS!&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <div class="demo">
      <strong style="display:block;margin-bottom:8px">Live Preview</strong>
      <iframe class="inline-preview" style="width:100%;height:260px;border:1px solid #27455b;border-radius:8px"></iframe>
    </div>
  `
};

const lessonsData = [
  {num:'01',title:'Cyberpunk Style Matrix',parts:['CSS Rule Anatomy','Selector Types','How CSS Works','CSS Comments','How CSS Finds HTML','Your First CSS Challenge!']}
];

/* ===== Initialize on DOM Ready ===== */
document.addEventListener('DOMContentLoaded', () => {
  // Inject lesson content
  const panels = document.querySelectorAll('.lesson-panel');
  panels.forEach(panel => {
    if (lessonContent[panel.id]) {
      panel.querySelector('.explain').innerHTML = lessonContent[panel.id];
    }
  });

  // Initialize inline previews
  panels.forEach(panel => {
    const pre = panel.querySelector('.code pre');
    const inline = panel.querySelector('.inline-preview');
    if (inline && pre) {
      const codeText = pre.innerText || '';
      inline.srcdoc = buildSrcdocFromCode(codeText);
    }
  });

  // Add Edit buttons
  document.querySelectorAll('.lesson-panel').forEach(panel=>{
    panel.querySelectorAll('.code').forEach(codeBlock=>{
      if (codeBlock.querySelector('.edit-btn')) return;
      const btn = document.createElement('button');
      btn.className = 'edit-btn';
      btn.textContent = 'Edit';
      codeBlock.appendChild(btn);

      btn.addEventListener('click', (e)=>{
        e.stopPropagation();
        openEditorForBlock(panel, codeBlock);
      });
    });
  });

  // Wire navigation
  wireUpNavigation();
  showLesson('lesson-1-1');
});

/* ===== Editor Functions ===== */
const modal = document.getElementById('editorModal');
const codeEditor = document.getElementById('codeEditor');
const applyBtn = document.getElementById('applyBtn');
const closeEditor = document.getElementById('closeEditor');
const previewFrame = document.getElementById('previewFrame');
const modalTitle = document.getElementById('modalTitle');
const errorBox = document.getElementById('errorBox');

function decodeHtmlEntities(str){
  const textarea = document.createElement('textarea');
  textarea.innerHTML = str;
  return textarea.value;
}

function showError(msg){
  errorBox.style.display = 'block';
  errorBox.textContent = msg;
}

function clearError(){
  errorBox.style.display = 'none';
  errorBox.textContent = '';
}

function buildSrcdocFromCode(code){
  const reporter = `
    <script>
      (function(){
        window.addEventListener('error', function(e){
          parent.postMessage({type:'runtime-error', message: e.message, lineno: e.lineno, colno: e.colno}, '*');
        });
        window.addEventListener('unhandledrejection', function(e){
          parent.postMessage({type:'runtime-error', message: e.reason && e.reason.message ? e.reason.message : String(e.reason)}, '*');
        });
      })();
    <\/script>
  `;
  const trimmed = (code || '').trim();

  if (/<\/?html|<!doctype|<head|<body/i.test(trimmed)) {
    if (/<\/body>/i.test(trimmed)) {
      return trimmed.replace(/<\/body>/i, reporter + '</body>');
    }
    return trimmed + reporter;
  }

  const looksLikeCSS = /\{[^}]*:[^}]*\}/.test(trimmed) && !/<[a-z]/i.test(trimmed);
  if (looksLikeCSS) {
    return `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
      <style>${trimmed}</style>
      <style>html,body{margin:0;padding:12px;font-family:system-ui,Segoe UI,Roboto,Arial}</style>
      </head><body>
      <h1>Preview Heading</h1>
      <p>This is a sample paragraph to show your CSS styles.</p>
      <div class="example-box" style="padding:12px;border:1px dashed #999;margin-top:12px;">Example box</div>
      ${reporter}
      </body></html>`;
  }

  return `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>html,body{margin:0;padding:12px;font-family:system-ui,Segoe UI,Roboto,Arial}</style></head><body>${trimmed}${reporter}</body></html>`;
}

function openEditorForBlock(panel, codeBlock){
  modal.dataset.targetPanel = panel.id;
  modalTitle.textContent = 'Edit code â€” ' + (panel.querySelector('h2') ? panel.querySelector('h2').textContent : panel.id);
  clearError();

  const pre = codeBlock.querySelector('pre');
  const codeText = pre ? pre.innerText.trim() : '';
  codeEditor.value = decodeHtmlEntities(codeText);

  try {
    previewFrame.srcdoc = buildSrcdocFromCode(codeEditor.value);
  } catch (err) {
    showError('Preview failed: ' + err.message);
  }

  modal.style.display = 'flex';
  modal.setAttribute('aria-hidden', 'false');
  setTimeout(()=>codeEditor.focus(),120);
}

applyBtn.addEventListener('click', ()=>{
  const code = codeEditor.value;
  const panelId = modal.dataset.targetPanel;
  if (!panelId) return;
  const panel = document.getElementById(panelId);
  if (!panel) return;
  const pre = panel.querySelector('.code pre');
  if (pre) pre.innerText = code;

  try {
    const srcdoc = buildSrcdocFromCode(code);
    previewFrame.srcdoc = srcdoc;
    clearError();
  } catch (err) {
    showError('Apply preview failed: ' + err.message);
  }

  const inline = panel.querySelector('.inline-preview');
  if (inline) {
    try {
      inline.srcdoc = buildSrcdocFromCode(code);
    } catch (err) {
      console.error('Inline preview update failed', err);
    }
  }
});

closeEditor.addEventListener('click', ()=>{
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden', 'true');
  clearError();
  previewFrame.srcdoc = '<!doctype html><html><body></body></html>';
});

modal.addEventListener('click', (e)=>{
  if(e.target === modal){
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    clearError();
    previewFrame.srcdoc = '<!doctype html><html><body></body></html>';
  }
});

window.addEventListener('message', (ev)=>{
  if(!ev.data) return;
  if(ev.data.type === 'runtime-error'){
    showError('Runtime error: ' + ev.data.message);
  }
});

/* ===== Navigation Functions ===== */
function queryAll(selector){ return Array.from(document.querySelectorAll(selector)); }

const partButtons = () => queryAll('.parts-buttons button');
const panelsAll  = () => queryAll('.lesson-panel');
const titleEl   = document.getElementById('panel-title');
const prevBtn = document.getElementById('prevLesson');
const nextBtn = document.getElementById('nextLesson');

function updateButtons() {
  const current = document.querySelector('.lesson-panel.visible');
  if(!current) return;
  const ids = current.id.split('-').map(Number);
  const lessonNum = ids[1];
  const partNum = ids[2];
  const parts = lessonsData[lessonNum - 1].parts.length;
  prevBtn.style.display = partNum === 1 ? 'none' : 'inline-block';
  nextBtn.style.display = partNum === parts ? 'none' : 'inline-block';
}

function showLesson(id) {
  panelsAll().forEach(p => p.classList.remove('visible'));
  partButtons().forEach(b => b.classList.remove('active'));
  const panel = document.getElementById(id);
  if(!panel) return;
  panel.classList.add('visible');
  const btn = document.querySelector(`[data-lesson="${id}"]`);
  if (btn) btn.classList.add('active');
  const metaEl = panel.querySelector('.meta');
  const partText = metaEl ? (metaEl.textContent.split('â€¢')[1] || '').trim() : '';
  titleEl.textContent = (panel.querySelector('h1') ? panel.querySelector('h1').textContent : '') + (partText ? ' â€¢ ' + partText : '');
  updateButtons();
}

function wireUpNavigation(){
  partButtons().forEach(btn => {
    btn.addEventListener('click', () => {
      if (btn.dataset.lesson) {
        showLesson(btn.dataset.lesson);
      }
    });
  });

  prevBtn.onclick = () => {
    const current = document.querySelector('.lesson-panel.visible');
    if(!current) return;
    const [_, lessonNum, partNum] = current.id.split('-').map(Number);
    if (partNum > 1) {
      showLesson(`lesson-${lessonNum}-${partNum - 1}`);
    }
  };

  nextBtn.onclick = () => {
    const current = document.querySelector('.lesson-panel.visible');
    if(!current) return;
    const [_, lessonNum, partNum] = current.id.split('-').map(Number);
    const totalParts = lessonsData[lessonNum - 1].parts.length;
    if (partNum < totalParts) {
      showLesson(`lesson-${lessonNum}-${partNum + 1}`);
    }
  };
}

if(document.readyState === 'complete' || document.readyState === 'interactive'){
  wireUpNavigation();
} else {
  document.addEventListener('DOMContentLoaded', wireUpNavigation);
}

</script>

</body>
</html>
