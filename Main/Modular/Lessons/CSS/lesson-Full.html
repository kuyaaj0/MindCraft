<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MindCraft â€” Lessons Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}

/* ===== WORLD BACKGROUND ===== */
body{
  font-family:'Press Start 2P', cursive;
  background:linear-gradient(#87e4ff,#c8f7b0);
  padding:20px;
  overflow:hidden;
  font-size:10px;
}

/* ===== EXIT BUTTON (copied from pixel lesson design) ===== */
.exit-btn{
  position:fixed;
  top:28px;
  left:28px;
  background:#ff4d4d;
  color:#fff;
  text-decoration:none;
  font-family:'Press Start 2P';
  padding:6px 10px;
  border-radius:8px;
  box-shadow: inset -2px -2px 0 rgba(0,0,0,.25), 0 3px 0 #a30000;
  z-index:1000;
  font-size:9px;
  transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
}
.exit-btn:hover{
  transform:translateY(-2px);
  box-shadow: inset -2px -2px 0 rgba(0,0,0,.25), 0 5px 0 #a30000;
}

/* ===== MAIN APP ===== */
.app{
  max-width:1200px;
  margin:0 auto;
  height:calc(100vh - 40px);
  background:linear-gradient(#8fe9ff 55%, #7dd37d);
  border-radius:24px;
  box-shadow:0 30px 70px rgba(0,0,0,.45);
  display:grid;
  grid-template-columns:260px 1fr;
  gap:18px;
  padding:18px;
}

/* ===== SIDEBAR ===== */
.sidebar{
  background:#8b5a2b;
  border-radius:18px;
  padding:18px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,.25),
    0 8px 0 #5c3a1a;
  color:#fff;
  display:flex;
  flex-direction:column;

  overflow-y: auto;   /* âœ… enables vertical scroll */
}


.brand h1{
  font-size:14px;
  text-align:center;
  text-shadow:2px 2px #000;
}
.brand p{
  font-size:8px;
  text-align:center;
  opacity:.9;
  margin-top:6px;
}

/* ===== LESSON BUTTONS ===== */
.lessons-list{
  margin-top:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.lessons-list button{
  background:#a56b34;
  border:none;
  padding:12px;
  border-radius:12px;
  cursor:pointer;
  color:#fff;
  font-size:9px;
  display:flex;
  gap:8px;
  align-items:center;
  box-shadow:
    inset -4px -4px 0 rgba(0,0,0,.25),
    0 5px 0 #5c3a1a;
}

.lessons-list button:hover{
  transform:translateY(-2px);
}

.lessons-list button.active{
  background:#c98b4a;
}

.num{
  background:#ffd966;
  color:#000;
  padding:4px 6px;
  border-radius:6px;
}

/* ===== CONTENT ===== */
.content{
  background:#e8f4ff;
  border-radius:18px;
  padding:16px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,.15),
    0 8px 0 #6fa8dc;
  display:flex;
  flex-direction:column;
}

/* ===== HEADER ===== */
.content-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

.content-head .title{
  font-size:12px;
  text-shadow:2px 2px #fff;
}

/* ===== NAV BUTTONS - COPIED PIXEL STYLE FOR PREV/NEXT ===== */
.content-head .nav-buttons {
  display:flex;
  gap:8px;
  align-items:center;
}

/* pixel arrow button style (copied from CSS Basics 'pixel' nav design) */
.content-head button.arrow-btn{
  font-family:'Press Start 2P';
  background:#4e91ff;
  color:#fff;
  border:3px solid #1f4fb8;
  padding:6px 10px;
  border-radius:8px;
  box-shadow:
    0 3px 0 #16347a,
    0 4px 0 #0c1b3a;
  cursor:pointer;
  font-size:8px;
  transition:transform 0.1s, box-shadow 0.1s, background 0.1s;
}

.content-head button.arrow-btn:hover{
  transform:translateY(-2px);
  background:#6aa7ff;
  box-shadow:
    0 5px 0 #16347a,
    0 6px 0 #0c1b3a;
}

.content-head button.arrow-btn:active{
  transform:translateY(1px);
  background:#3f7aed;
  box-shadow:
    0 1px 0 #16347a,
    0 2px 0 #0c1b3a;
}

/* ===== PANELS ===== */
.panel-wrap{
  flex:1;
  position:relative;
}

.lesson-panel{
  position:absolute;
  inset:0;
  padding:16px;
  overflow:auto;
  display:none;
}

.lesson-panel.visible{display:block}

/* ===== LESSON CONTENT ===== */
.lesson-panel h1{
  font-size:14px;
  margin-bottom:6px;
}

.lesson-panel h2{
  font-size:11px;
  margin-bottom:8px;
}

.meta{
  font-size:8px;
  opacity:.7;
  margin-bottom:16px;
}

/* ===== BOXES ===== */
.explain{
  background:#fff3cd;
  border:3px solid #c9a227;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  line-height:1.6;
}

.code{
  background:#1e1e1e;
  color:#00ff90;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  overflow:auto;
  position:relative;
}

.code pre{
  white-space:pre-wrap;
  word-break:break-word;
}

.demo{
  background:#d9ead3;
  border:3px solid #6aa84f;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
}

.examples{
  margin-left:16px;
}

.examples li{
  margin:6px 0;
}

/* ===== EDIT BUTTON (inside .code) ===== */
.code .edit-btn{
  position:absolute;
  top:10px;
  right:10px;
  background:#5c3a1a;
  color:#fff;
  border:none;
  padding:6px 8px;
  border-radius:8px;
  font-size:9px;
  cursor:pointer;
  box-shadow:0 4px 0 #3e2814;
}

/* ===== EDITOR MODAL (MODE REMOVED) ===== */
#editorModal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.5);
  z-index:1200;
}
#editorModal .modal{
  width:min(950px,95%);
  height:min(700px,95%);
  background:#0b1020;
  border-radius:12px;
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:8px;
  color:#e6f7ff;
  box-shadow:0 10px 40px rgba(0,0,0,.6);
  font-family:monospace;
}
#editorModal header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}
#editorModal .controls{display:flex;gap:8px;align-items:center;}
#editorModal button{
  font-family:inherit;
}
#editorModal textarea{
  width:100%;
  height:280px;
  background:#071018;
  color:#cfeefd;
  border:1px solid #27455b;
  padding:10px;
  border-radius:8px;
  resize:vertical;
  font-family:monospace;
  font-size:12px;
  line-height:1.4;
}
#editorModal .bottom{
  display:flex;
  gap:12px;
}
#editorModal .preview{
  flex:1;
  border:1px solid #27455b;
  border-radius:8px;
  overflow:hidden;
}
#errorBox{
  background:#3a1b1b;
  color:#ffd6d6;
  padding:8px;
  border-radius:6px;
  display:none;
  font-size:12px;
}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
  .app{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
  }
  #editorModal .modal{height:86vh}
}
</style>
</head>

<body>
<div class="app">

<aside class="sidebar">
  <div class="brand">
    <h1>ðŸ§  MindCraft</h1>
    <p>CSS Lessons 01â€“05</p>
  </div>

  <div class="lessons-list">

    <!-- ===== LESSONS 1-5 ===== -->
    <script>
      const lessonsData=[
        {num:'01',title:'Cyberpunk Style Matrix',parts:['CSS Rule Anatomy','Selector Types','How CSS Works','CSS Comments','How CSS Finds HTML','Your First CSS Challenge!']},
        {num:'02',title:'External, Internal & Inline Styles',parts:['What is CSS?','External CSS','Internal CSS','Inline CSS','When to Use Each']},
        {num:'03',title:'Targeting Elements Efficiently',parts:['What Are CSS Selectors?','Element Selector','Class Selector (.)','ID Selector (#)','Element vs Class vs ID','YOUR CHALLENGE']},
        {num:'04',title:'Mastering Visual Design',parts:['Why Are Colors and Backgrounds Important?','The color Property','The background-color Property','The background-image Property','The background-size Property','YOUR CHALLENGE!']},
        {num:'05',title:'Dark Neon Typography Matrix',parts:['Font Families','Font Size','Line-height','Text-align','text-decoration','Font-weight','Google Fonts Integration','YOUR CHALLENGE!']}
      ];

      lessonsData.forEach((lesson,i)=>{
        document.write(`<button data-lesson="lesson-${i+1}-1" style="display:flex; align-items:center; justify-content:space-between;">
          <span><span class="num">${lesson.num}</span> ${lesson.title}</span>
          <span id="toggleArrow${i+1}" style="cursor:pointer; font-weight:bold; user-select:none;">â–¶</span>
        </button>`);
        
        document.write(`<div id="partsDropdown${i+1}" style="display:none; flex-direction:column; gap:8px; margin-left: 30px; margin-top: 6px;">`);
        lesson.parts.forEach((part,j)=>{
          document.write(`<button data-lesson="lesson-${i+1}-${j+1}" style="font-size:8px; padding:6px 12px;">${part}</button>`);
        });
        document.write(`</div>`);
      });
    </script>

  </div>
</aside>

<main class="content">
  <div class="content-head">
    <a href="../../../Webside/Student.html" class="exit-btn" aria-label="Exit lessons">EXIT</a>
    <div class="title" id="panel-title">01 â€¢ CSS Basics</div>
    <div class="nav-buttons">
      <button id="prevLesson" class="arrow-btn" aria-label="Previous lesson">â—€</button>
      <button id="nextLesson" class="arrow-btn" aria-label="Next lesson">â–¶</button>
    </div>
  </div>

  <div class="panel-wrap">

    <!-- ===== LESSON PANELS (generated from lessonsData 1-5 only) ===== -->
    <script>
      lessonsData.forEach((lesson,i)=>{
        lesson.parts.forEach((part,j)=>{
          document.write(`<article id="lesson-${i+1}-${j+1}" class="lesson-panel">
            <h1>${lesson.title}</h1>
            <div class="meta">Lesson ${i+1} â€¢ Part ${j+1}</div>
            <h2>${('0'+(j+1)).slice(-2)}. ${part}</h2>
            <div class="explain"></div>
          </article>`);
        });
      });
    </script>

  </div>
</main>
</div>
 
<!-- EDITOR MODAL (in DOM, initially hidden) - mode selector removed -->
<div id="editorModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-label="Code editor">
    <header>
      <div>
        <strong id="modalTitle">Edit Code</strong>
        <div id="errorBox"></div>
      </div>
      <div class="controls">
        <button id="applyBtn">Apply</button>
        <button id="closeEditor">Close</button>
      </div>
    </header>
    <textarea id="codeEditor" spellcheck="false"></textarea>
    <div style="display:flex;gap:8px;flex:1;min-height:220px;">
      <div style="flex:1;">
        <strong style="font-size:12px">Live Preview (editor)</strong>
        <div class="preview"><iframe id="previewFrame" style="width:100%;height:100%;border:0"></iframe></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ===============================
   LESSON CONTENT (updated: lessons 3-5 now include example code + demo)
   Lessons 1.4 and 1.6 keep inline previews and are synced when editing.
=============================== */
const lessonContent = {
  /* Lesson 1 (kept as before) */
  "lesson-1-1": `
    <div class="explain">
      CSS = <span class="highlight">SELECTOR { PROPERTY: VALUE; }</span><br>
      <strong>Selector</strong> = HTML target (h1, .class, #id)<br>
      <strong>Property</strong> = what to change (color, font-size)<br>
      <strong>Value</strong> = how to change it (red, 24px)
    </div>
    <div class="code">
<pre>h1 {                    /* SELECTOR */
    color: #ff00ff;      /* PROPERTY: VALUE */
    font-size: 48px;     /* PROPERTY: VALUE */
}</pre>
    </div>
  `,
  "lesson-1-2": `
    <p>CSS selectors tell the browser <b>which HTML elements</b> to target.</p>
    <div class="code">
<pre>/* Element selector */
p { color: #00aaff; }

/* Class selector */
.card { background:#111; color:#0ff; padding:12px; }

/* ID selector */
#hero { font-size:24px; color:#ff66cc; }</pre>
    </div>
    <div class="demo">
      <p>Try the examples:</p>
      <div class="card" style="margin-top:8px;padding:10px;border-radius:8px;">.card demo box</div>
      <p id="hero" style="margin-top:8px;">#hero demo</p>
    </div>
  `,
  "lesson-1-3": `
    <p>Watch plain HTML transform with CSS! Same content, different styles.</p>
    <div class="code">
<pre>/* Add neon outline to headings */
h3 { color:#ffcc00; text-shadow:0 0 8px rgba(255,204,0,0.6); }

/* Style paragraph */
p.notice { color:#00ffcc; font-weight:bold; }</pre>
    </div>

    <div class="demo">
      <h3>Example Heading</h3>
      <p class="notice">This paragraph uses class "notice".</p>
    </div>
  `,
  "lesson-1-4": `
    <p>Use <span class="highlight">/* comments */</span> to explain code. Browsers ignore everything between /* and */.</p>
    <div class="code">
<pre>/* This styles the main heading */
h1 {
    color: #ff00ff;     /* Magenta color */
    font-size: 4em;     /* Extra large text */
}

/* Navigation menu styles */
nav {
    background: #000;   /* Pure black */
}</pre>
    </div>

    <div class="demo">
      <strong style="display:block;margin-bottom:8px">Live Preview</strong>
      <iframe class="inline-preview" style="width:100%;height:220px;border:1px solid #27455b;border-radius:8px"></iframe>
    </div>
  `,
  "lesson-1-5": `
    <p>CSS scans HTML â†’ finds matching <span class="highlight">selectors</span> â†’ applies styles.<br>
    Inline styles &gt; Internal &gt; External CSS (priority order).</p>
    <div class="code">
<pre>/* Inline example */
<span style="color:#ff0000">/* (in HTML) &lt;p style='color:red'&gt;... &lt;/p&gt; */</span>

/* Internal CSS example (in &lt;style&gt;) */
.box { padding:12px; background:#222; color:#0ff; }</pre>
    </div>
    <div class="demo">
      <p style="color: red;">RED = Inline style (highest priority)</p>
      <div class="box" style="margin-top:8px;padding:8px;background:#222;color:#0ff;">Internal CSS demo</div>
    </div>
  `,
  /* LESSON 1 - PART 6: inline preview for hands-on editing */
  "lesson-1-6": `
    <p>Style this CMU card! Change colors, add shadows, make it cyberpunk!</p>
    <div class="code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
/* YOUR CSS HERE! */
.cmu-card {
    border-radius:10px;
    padding:12px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="cmu-card"&gt;
    &lt;h2&gt;CMU IT Student&lt;/h2&gt;
    &lt;p&gt;Learning cyberpunk CSS!&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <div class="demo">
      <strong style="display:block;margin-bottom:8px">Live Preview</strong>
      <iframe class="inline-preview" style="width:100%;height:260px;border:1px solid #27455b;border-radius:8px"></iframe>
    </div>
  `,

  /* LESSON 2 (kept) */
  "lesson-2-1": `
<p><b>CSS (Cascading Style Sheets)</b> gives color, layout, and life to a web page.
It controls fonts, spacing, colors, animations, and responsiveness.</p>
  `,
  "lesson-2-2": `
<div class="code">
<pre>&lt;!-- index.html --&gt;
&lt;head&gt;
  &lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;
&lt;!-- style.css --&gt;
body {
  background-color: black;
  color: cyan;
}</pre>
</div>
<div class="demo"><p style="color:#00ffff;margin-top:8px">âœ… External CSS example shown</p></div>
  `,
  "lesson-2-3": `
<div class="code">
<pre>&lt;head&gt;
&lt;style&gt;
  body { background:#000;color:#ff00ff; }
&lt;/style&gt;
&lt;/head&gt;</pre>
</div>
<div class="demo"><h1 style="color:#ff00ff">Internal CSS demo</h1></div>
  `,
  "lesson-2-4": `
<div class="code">
<pre>&lt;h1 style="color:#00ffff;background:#111;padding:10px;"&gt;Inline CSS Example&lt;/h1&gt;</pre>
</div>
<div class="demo"><h1 style="color:#00ffff;background:#111;padding:10px;">Inline CSS Example</h1></div>
  `,
  "lesson-2-5": `
<div class="explain">
<p>When to use each:</p>
<ul class="examples"><li>External â€” best for whole sites</li><li>Internal â€” single page</li><li>Inline â€” quick overrides</li></ul>
</div>
  `,

  /* ===== LESSON 3 â€” UPDATED with examples ===== */
  "lesson-3-1": `
  <div class="explain">CSS selectors let you target elements on the page to style them. Here are examples for element, class and ID selectors.</div>
  <div class="code">
  <pre>/* Element selector */
h2 { color:#00ccff; }

/* Class selector */
.note { background:#111;color:#0ff;padding:8px;border-radius:6px; }

/* ID selector */
#welcome { font-size:20px; color:#ff66aa; }</pre>
  </div>
  <div class="demo">
    <h2>Element selector example</h2>
    <div class="note">.note example box</div>
    <p id="welcome" style="margin-top:10px;">#welcome example</p>
  </div>
  `,
  "lesson-3-2": `
  <div class="explain">Element selectors select HTML tags by name. Use them for broad changes like typography.</div>
  <div class="code">
  <pre>/* Select all paragraph tags */
p { line-height:1.6; color:#004466; }</pre>
  </div>
  <div class="demo">
    <p>This paragraph is styled by the element selector example above.</p>
    <p>Another paragraph to show consistent styling.</p>
  </div>
  `,
  "lesson-3-3": `
  <div class="explain">Classes are reusable. Add the same class to many elements.</div>
  <div class="code">
  <pre>/* class used for highlight */
.highlight { background:linear-gradient(90deg,#ffdd57,#ff9a57); color:#111; padding:6px; border-radius:6px; }</pre>
  </div>
  <div class="demo">
    <p class="highlight">This text uses the .highlight class</p>
    <button onclick="this.classList.toggle('highlight')">Toggle highlight on button</button>
  </div>
  `,
  "lesson-3-4": `
  <div class="explain">IDs identify a single element and are useful for unique items on the page.</div>
  <div class="code">
  <pre>#hero { background:#001122; color:#00ffcc; padding:12px; border-radius:8px; }</pre>
  </div>
  <div class="demo">
    <div id="hero">Hero section â€” unique styling</div>
    <p style="margin-top:8px">IDs should be used once per page.</p>
  </div>
  `,
  "lesson-3-5": `
  <div class="explain">Compare element, class and ID together.</div>
  <div class="code">
  <pre>/* element */
li { margin-bottom:6px; }

/* class */
.menu-item { color:#ffcc00; }

/* id */
#main-item { font-weight:700; }</pre>
  </div>
  <div class="demo">
    <ul>
      <li class="menu-item">Menu A</li>
      <li class="menu-item" id="main-item">Menu B (main)</li>
      <li class="menu-item">Menu C</li>
    </ul>
  </div>
  `,
  "lesson-3-6": `
  <div class="explain">Challenge: create a small profile using element, class and id selectors. Example provided.</div>
  <div class="code">
  <pre>&lt;div id="profile"&gt;
  &lt;h3&gt;Student&lt;/h3&gt;
  &lt;p class="bio"&gt;Loves neon CSS.&lt;/p&gt;
&lt;/div&gt;

#profile { border:2px solid #00ffff; padding:10px; border-radius:8px; }
.bio { color:#ff77aa; }</pre>
  </div>
  <div class="demo">
    <div id="profile" style="border:2px solid #00ffff;padding:10px;border-radius:8px;">
      <h3>Student</h3>
      <p class="bio" style="color:#ff77aa;margin:0">Loves neon CSS.</p>
    </div>
  </div>
  `,

  /* ===== LESSON 4 â€” UPDATED with examples ===== */
  "lesson-4-1": `
  <div class="explain">Colors and backgrounds set mood. Use hex, rgb, or named values. Example below demonstrates color + gradient.</div>
  <div class="code">
  <pre>/* Background gradient + text color */
.hero {
  background: linear-gradient(135deg,#ff0080,#00d0ff);
  color:white;
  padding:16px;
  border-radius:10px;
}</pre>
  </div>
  <div class="demo">
    <div class="hero" style="background:linear-gradient(135deg,#ff0080,#00d0ff);color:#fff;padding:16px;border-radius:10px;">
      Gradient hero example
    </div>
  </div>
  `,
  "lesson-4-2": `
  <div class="explain">color property controls text color. Examples with hex and rgba.</div>
  <div class="code">
  <pre>h4 { color: #ff00ff; }
p.info { color: rgba(0,255,255,0.9); }</pre>
  </div>
  <div class="demo">
    <h4>Magenta heading</h4>
    <p class="info">Cyan-ish paragraph using rgba.</p>
  </div>
  `,
  "lesson-4-3": `
  <div class="explain">background-color fills element area. Use for cards, sections, buttons.</div>
  <div class="code">
  <pre>.card { background-color:#111133; color:#00ffff; padding:12px; border-radius:8px; }</pre>
  </div>
  <div class="demo">
    <div class="card" style="background:#111133;color:#00ffff;padding:12px;border-radius:8px;">
      Card with background-color
    </div>
  </div>
  `,
  "lesson-4-4": `
  <div class="explain">background-image can be an image or gradient. Example uses radial gradient.</div>
  <div class="code">
  <pre>.pattern { background-image: radial-gradient(circle at 20% 20%, #ff9 0%, transparent 20%), linear-gradient(90deg,#00f,#0ff); padding:12px; color:#fff; }</pre>
  </div>
  <div class="demo">
    <div class="pattern" style="background-image:radial-gradient(circle at 20% 20%, #ff9 0%, transparent 20%),linear-gradient(90deg,#00f,#0ff);padding:12px;color:#fff;border-radius:8px;">
      Pattern background demo
    </div>
  </div>
  `,
  "lesson-4-5": `
  <div class="explain">background-size controls image scaling. 'cover' fills, 'contain' fits.</div>
  <div class="code">
  <pre>.bg-cover { background-image:linear-gradient(45deg,#f06,#09f); background-size:cover; padding:14px; }</pre>
  </div>
  <div class="demo">
    <div class="bg-cover" style="background:linear-gradient(45deg,#f06,#09f);background-size:cover;padding:14px;border-radius:8px;color:#fff;">
      Background-size: cover demo
    </div>
  </div>
  `,
  "lesson-4-6": `
  <div class="explain">Challenge: combine colors, background-image and background-size to build a neon card. Example provided.</div>
  <div class="code">
  <pre>.neon-card {
  width:220px;
  padding:16px;
  background:linear-gradient(135deg,#330033 0%,#001133 100%);
  border:2px solid #00ffff;
  box-shadow:0 0 20px #00ffff66;
  color:#fff;
  border-radius:10px;
}</pre>
  </div>
  <div class="demo">
    <div class="neon-card" style="width:220px;padding:16px;background:linear-gradient(135deg,#330033,#001133);border:2px solid #00ffff;box-shadow:0 0 20px #00ffff66;color:#fff;border-radius:10px;">
      Neon card example
    </div>
  </div>
  `,

  /* ===== LESSON 5 â€” UPDATED with examples ===== */
  "lesson-5-1": `
  <div class="explain">font-family sets the typeface. Use fallbacks. Example uses monospace and a Google font import suggestion.</div>
  <div class="code">
  <pre>body { font-family:'Press Start 2P', monospace; }
.heading { font-family: 'Orbitron', sans-serif; }</pre>
  </div>
  <div class="demo">
    <p style="font-family:'Press Start 2P',monospace">Press Start text (if loaded)</p>
    <h3 style="font-family:'Orbitron',sans-serif">Orbitron heading (example)</h3>
  </div>
  `,
  "lesson-5-2": `
  <div class="explain">font-size controls size. Use px, em, rem. Example shows scalable text.</div>
  <div class="code">
  <pre>.big { font-size:24px; }
.small { font-size:12px; }</pre>
  </div>
  <div class="demo">
    <p class="big" style="font-size:24px">Big text example</p>
    <p class="small" style="font-size:12px">Small text example</p>
  </div>
  `,
  "lesson-5-3": `
  <div class="explain">line-height adjusts spacing between lines. Good for readability.</div>
  <div class="code">
  <pre>.readable { line-height:1.8; max-width:36rem; }</pre>
  </div>
  <div class="demo">
    <p class="readable" style="line-height:1.8;">
      This paragraph demonstrates increased line-height which improves readability, especially with neon-styled text.
    </p>
  </div>
  `,
  "lesson-5-4": `
  <div class="explain">text-align positions inline text inside its container.</div>
  <div class="code">
  <pre>.centered { text-align:center; }</pre>
  </div>
  <div class="demo">
    <div class="centered" style="text-align:center">
      <h2>Centered heading</h2>
      <p>All text in this box is centered.</p>
    </div>
  </div>
  `,
  "lesson-5-5": `
  <div class="explain">text-decoration for underlines, overlines, and strikethroughs.</div>
  <div class="code">
  <pre>a { text-decoration:underline; color:#00f; }</pre>
  </div>
  <div class="demo">
    <a href="#" style="text-decoration:underline;color:#00f">Underlined link sample</a>
    <p><del>Strikethrough sample</del></p>
  </div>
  `,
  "lesson-5-6": `
  <div class="explain">font-weight makes text bolder. Numeric values 100-900. Example below.</div>
  <div class="code">
  <pre>.light { font-weight:300; } .bold { font-weight:900; }</pre>
  </div>
  <div class="demo">
    <p class="light" style="font-weight:300">Light text example</p>
    <p class="bold" style="font-weight:900">Bold text example</p>
  </div>
  `,
  "lesson-5-7": `
  <div class="explain">Import Google Fonts to enhance typography. Example import shown in code.</div>
  <div class="code">
  <pre>@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
h1 { font-family: 'Orbitron', sans-serif; }</pre>
  </div>
  <div class="demo">
    <h1 style="font-family:'Orbitron',sans-serif">Orbitron demo (if loaded)</h1>
  </div>
  `,
  "lesson-5-8": `
  <div class="explain">Combine font properties to make a Neon Text Showcase. Example provided.</div>
  <div class="code">
  <pre>.neon-text {
  font-family: 'Press Start 2P', monospace;
  font-size:20px;
  color:#0ff;
  text-shadow: 0 0 8px #0ff, 0 0 20px #ff00ff;
}</pre>
  </div>
  <div class="demo">
    <p class="neon-text" style="font-family:'Press Start 2P',monospace;font-size:20px;color:#0ff;text-shadow:0 0 8px #0ff,0 0 20px #ff00ff;">
      Neon Text Showcase
    </p>
  </div>
  `
}; /* end lessonContent */

/* ===============================
   After DOM ready: inject content, add edit buttons, wire navigation
   - Editor mode selector removed (simplified: editor treats code as HTML/snippet)
   - Lessons 1.4 and 1.6 include inline preview iframes that are synced when editing
=============================== */
document.addEventListener('DOMContentLoaded', () => {
  // inject lesson content
  const panels = document.querySelectorAll('.lesson-panel');
  panels.forEach(panel => {
    if (lessonContent[panel.id]) {
      panel.querySelector('.explain').innerHTML = lessonContent[panel.id];
    }
  });

  // after injecting, initialize inline previews (for panels that include .inline-preview)
  panels.forEach(panel => {
    const pre = panel.querySelector('.code pre');
    const inline = panel.querySelector('.inline-preview');
    if (inline && pre) {
      const codeText = pre.innerText || '';
      inline.srcdoc = buildSrcdocFromCode(codeText);
    }
  });

  // add Edit buttons to each .code block
  document.querySelectorAll('.lesson-panel').forEach(panel=>{
    panel.querySelectorAll('.code').forEach(codeBlock=>{
      // avoid duplicating
      if (codeBlock.querySelector('.edit-btn')) return;
      const btn = document.createElement('button');
      btn.className = 'edit-btn';
      btn.textContent = 'Edit';
      codeBlock.appendChild(btn);

      btn.addEventListener('click', (e)=>{
        e.stopPropagation();
        openEditorForBlock(panel, codeBlock);
      });
    });
  });

  // wire up navigation (sidebar/arrow buttons)
  wireUpNavigation();

  // show first lesson
  showLesson('lesson-1-1');
});

/* ===============================
   Editor logic and helpers (mode removed; editor treats content as HTML/snippet)
=============================== */
const modal = document.getElementById('editorModal');
const codeEditor = document.getElementById('codeEditor');
const applyBtn = document.getElementById('applyBtn');
const closeEditor = document.getElementById('closeEditor');
const previewFrame = document.getElementById('previewFrame');
const modalTitle = document.getElementById('modalTitle');
const errorBox = document.getElementById('errorBox');

function decodeHtmlEntities(str){
  const textarea = document.createElement('textarea');
  textarea.innerHTML = str;
  return textarea.value;
}

function showError(msg){
  errorBox.style.display = 'block';
  errorBox.textContent = msg;
}
function clearError(){
  errorBox.style.display = 'none';
  errorBox.textContent = '';
}

// Build srcdoc from code text.
// - If code contains full HTML, return it (with reporter).
// - If code looks like CSS only (contains { and : and no '<'), wrap into <style> and append a simple demo HTML so the preview shows the styles.
// - Otherwise wrap into a basic HTML document.
function buildSrcdocFromCode(code){
  const reporter = `
    <script>
      (function(){
        window.addEventListener('error', function(e){
          parent.postMessage({type:'runtime-error', message: e.message, lineno: e.lineno, colno: e.colno}, '*');
        });
        window.addEventListener('unhandledrejection', function(e){
          parent.postMessage({type:'runtime-error', message: e.reason && e.reason.message ? e.reason.message : String(e.reason)}, '*');
        });
        const levels = ['log','warn','error','info'];
        levels.forEach(l=>{
          const orig = console[l];
          console[l] = function(...args){
            parent.postMessage({type:'console', level: l, args: args}, '*');
            orig.apply(console, args);
          }
        });
      })();
    <\/script>
  `;
  const trimmed = (code || '').trim();

  // Full html detection
  if (/<\/?html|<!doctype|<head|<body/i.test(trimmed)) {
    // ensure reporter appended inside body
    if (/<\/body>/i.test(trimmed)) {
      return trimmed.replace(/<\/body>/i, reporter + '</body>');
    }
    return trimmed + reporter;
  }

  // CSS-only detection: contains braces and colons but no tags
  const looksLikeCSS = /\{[^}]*:[^}]*\}/.test(trimmed) && !/<[a-z]/i.test(trimmed);
  if (looksLikeCSS) {
    // Build a small demo with sample markup to show the CSS effect
    return `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
      <style>${trimmed}</style>
      <style>html,body{margin:0;padding:12px;font-family:system-ui,Segoe UI,Roboto,Arial}</style>
      </head><body>
      <h1>Preview Heading</h1>
      <p>This is a sample paragraph to show your CSS styles.</p>
      <div class="example-box" style="padding:12px;border:1px dashed #999;margin-top:12px;">Example box</div>
      ${reporter}
      </body></html>`;
  }

  // Default: treat as HTML fragment
  return `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>html,body{margin:0;padding:12px;font-family:system-ui,Segoe UI,Roboto,Arial}</style></head><body>${trimmed}${reporter}</body></html>`;
}

// open editor for a code block (no mode selection)
function openEditorForBlock(panel, codeBlock){
  modal.dataset.targetPanel = panel.id;
  modalTitle.textContent = 'Edit code â€” ' + (panel.querySelector('h2') ? panel.querySelector('h2').textContent : panel.id);
  clearError();

  const pre = codeBlock.querySelector('pre');
  const codeText = pre ? pre.innerText.trim() : '';
  codeEditor.value = decodeHtmlEntities(codeText);

  // preview inside modal
  try {
    previewFrame.srcdoc = buildSrcdocFromCode(codeEditor.value);
  } catch (err) {
    showError('Preview failed: ' + err.message);
  }

  modal.style.display = 'flex';
  modal.setAttribute('aria-hidden', 'false');
  setTimeout(()=>codeEditor.focus(),120);
}

// apply changes from editor: update the lesson pre (so the code is persisted in UI),
// update the modal preview, and update inline preview iframe if present in the lesson panel
applyBtn.addEventListener('click', ()=>{
  const code = codeEditor.value;
  const panelId = modal.dataset.targetPanel;
  if (!panelId) return;
  const panel = document.getElementById(panelId);
  if (!panel) return;
  const pre = panel.querySelector('.code pre');
  if (pre) pre.innerText = code;

  // update modal preview
  try {
    const srcdoc = buildSrcdocFromCode(code);
    previewFrame.srcdoc = srcdoc;
    clearError();
  } catch (err) {
    showError('Apply preview failed: ' + err.message);
  }

  // if the lesson panel contains an inline preview iframe (e.g., lesson-1-4 or lesson-1-6), update it too
  const inline = panel.querySelector('.inline-preview');
  if (inline) {
    try {
      inline.srcdoc = buildSrcdocFromCode(code);
    } catch (err) {
      // non-blocking
      console.error('Inline preview update failed', err);
    }
  }

  // keep modal open so user can re-apply
});

closeEditor.addEventListener('click', ()=>{
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden', 'true');
  clearError();
  previewFrame.srcdoc = '<!doctype html><html><body></body></html>';
});

modal.addEventListener('click', (e)=>{
  if(e.target === modal){
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    clearError();
    previewFrame.srcdoc = '<!doctype html><html><body></body></html>';
  }
});

// listen for runtime errors forwarded from iframe
window.addEventListener('message', (ev)=>{
  if(!ev.data) return;
  if(ev.data.type === 'runtime-error'){
    showError('Runtime error: ' + ev.data.message + ' (line:'+ (ev.data.lineno||'n/a') +')');
  } else if(ev.data.type === 'console'){
    // optionally display console messages; currently ignored
  }
});

/* ===============================
   Navigation (sidebar + arrows)
=============================== */
function queryAll(selector){ return Array.from(document.querySelectorAll(selector)); }

// we must re-query because lessons-list buttons were document.write'd earlier
const sideButtons = () => queryAll('.lessons-list > button');
const panelsAll  = () => queryAll('.lesson-panel');
const titleEl   = document.getElementById('panel-title');
const prevBtn = document.getElementById('prevLesson');
const nextBtn = document.getElementById('nextLesson');

function updateButtons() {
  const current = document.querySelector('.lesson-panel.visible');
  if(!current) return;
  const ids = current.id.split('-').map(Number);
  const lessonNum = ids[1];
  const partNum = ids[2];
  const parts = lessonsData[lessonNum - 1].parts.length;
  prevBtn.style.display = partNum === 1 ? 'none' : 'inline-block';
  nextBtn.style.display = partNum === parts ? 'none' : 'inline-block';
}

function showLesson(id) {
  panelsAll().forEach(p => p.classList.remove('visible'));
  sideButtons().forEach(b => b.classList.remove('active'));
  const panel = document.getElementById(id);
  if(!panel) return;
  panel.classList.add('visible');
  const mainId = id.split('-').slice(0, 2).join('-') + '-1';
  const mainBtn = document.querySelector(`[data-lesson="${mainId}"]`);
  if (mainBtn) mainBtn.classList.add('active');
  const metaEl = panel.querySelector('.meta');
  const partText = metaEl ? (metaEl.textContent.split('â€¢')[1] || '').trim() : '';
  titleEl.textContent = (panel.querySelector('h1') ? panel.querySelector('h1').textContent : '') + (partText ? ' â€¢ ' + partText : '');
  updateButtons();
}

function wireUpNavigation(){
  sideButtons().forEach(btn => {
    btn.addEventListener('click', () => {
      if (btn.dataset.lesson) {
        showLesson(btn.dataset.lesson);
      }
    });
  });

  lessonsData.forEach((lesson, i) => {
    const arrow = document.getElementById(`toggleArrow${i + 1}`);
    const dropdown = document.getElementById(`partsDropdown${i + 1}`);
    if(!arrow || !dropdown) return;
    arrow.addEventListener('click', e => {
      e.stopPropagation();
      const open = dropdown.style.display === 'flex';
      dropdown.style.display = open ? 'none' : 'flex';
      arrow.textContent = open ? 'â–¶' : 'â–¼';
    });
    dropdown.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        showLesson(btn.dataset.lesson);
      });
    });
  });

  prevBtn.onclick = () => {
    const current = document.querySelector('.lesson-panel.visible');
    if(!current) return;
    const [_, lessonNum, partNum] = current.id.split('-').map(Number);
    if (partNum > 1) {
      showLesson(`lesson-${lessonNum}-${partNum - 1}`);
    }
  };

  nextBtn.onclick = () => {
    const current = document.querySelector('.lesson-panel.visible');
    if(!current) return;
    const [_, lessonNum, partNum] = current.id.split('-').map(Number);
    const totalParts = lessonsData[lessonNum - 1].parts.length;
    if (partNum < totalParts) {
      showLesson(`lesson-${lessonNum}-${partNum + 1}`);
    }
  };
}

// initial wiring (in case DOMContentLoaded already fired)
// wireUpNavigation is called in DOMContentLoaded above, but call again safely to ensure listeners are attached
if(document.readyState === 'complete' || document.readyState === 'interactive'){
  wireUpNavigation();
} else {
  document.addEventListener('DOMContentLoaded', wireUpNavigation);
}

// attach dropdown handlers and lesson-item click listeners
lessonsData.forEach((lesson, i) => {
    const arrow = document.getElementById(`toggleArrow${i + 1}`);
    const dropdown = document.getElementById(`partsDropdown${i + 1}`);
    if (!arrow || !dropdown) return;

    arrow.addEventListener('click', e => {
      e.stopPropagation();
      const open = dropdown.style.display === 'flex';
      dropdown.style.display = open ? 'none' : 'flex';
      arrow.textContent = open ? 'â–¶' : 'â–¼';
    });

    dropdown.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        showLesson(btn.dataset.lesson);
        // Do not auto-close the dropdown for convenience
      });
    });
  });

/* ===============================
   INITIAL LOAD
=============================== */
showLesson('lesson-1-1');

</script>

</body>
</html>
