<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MindCraft â€” Lessons Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}

/* ===== WORLD BACKGROUND ===== */
body{
  font-family:'Press Start 2P', cursive;
  background:linear-gradient(#87e4ff,#c8f7b0);
  padding:20px;
  overflow:hidden;
  font-size:10px;
}

/* ===== EXIT BUTTON ===== */
.exit-btn{
  position:fixed;
  top:28px;
  left:28px;
  background:#ff4d4d;
  color:#fff;
  text-decoration:none;
  font-family:'Press Start 2P';
  padding:6px 10px;
  border-radius:8px;
  box-shadow: inset -2px -2px 0 rgba(0,0,0,.25), 0 3px 0 #a30000;
  z-index:1000;
  font-size:9px;
  transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
}
.exit-btn:hover{
  transform:translateY(-2px);
  box-shadow: inset -2px -2px 0 rgba(0,0,0,.25), 0 5px 0 #a30000;
}

/* ===== MAIN APP ===== */
.app{
  max-width:1200px;
  margin:0 auto;
  height:calc(100vh - 40px);
  background:linear-gradient(#8fe9ff 55%, #7dd37d);
  border-radius:24px;
  box-shadow:0 30px 70px rgba(0,0,0,.45);
  display:grid;
  grid-template-columns:260px 1fr;
  gap:18px;
  padding:18px;
}

/* ===== SIDEBAR ===== */
.sidebar{
  background:#8b5a2b;
  border-radius:18px;
  padding:18px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,.25),
    0 8px 0 #5c3a1a;
  color:#fff;
  display:flex;
  flex-direction:column;
  overflow-y: auto;
}

.brand h1{
  font-size:14px;
  text-align:center;
  text-shadow:2px 2px #000;
}
.brand p{
  font-size:8px;
  text-align:center;
  opacity:.9;
  margin-top:6px;
}

/* ===== LESSON BUTTONS ===== */
.lessons-list{
  margin-top:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.lessons-list button{
  background:#a56b34;
  border:none;
  padding:12px;
  border-radius:12px;
  cursor:pointer;
  color:#fff;
  font-size:9px;
  display:flex;
  gap:8px;
  align-items:center;
  box-shadow:
    inset -4px -4px 0 rgba(0,0,0,.25),
    0 5px 0 #5c3a1a;
}

.lessons-list button:hover{
  transform:translateY(-2px);
}

.lessons-list button.active{
  background:#c98b4a;
}

.num{
  background:#ffd966;
  color:#000;
  padding:4px 6px;
  border-radius:6px;
}

/* ===== CONTENT ===== */
.content{
  background:#e8f4ff;
  border-radius:18px;
  padding:16px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,.15),
    0 8px 0 #6fa8dc;
  display:flex;
  flex-direction:column;
}

/* ===== HEADER ===== */
.content-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

.content-head .title{
  font-size:12px;
  text-shadow:2px 2px #fff;
}

/* ===== NAV BUTTONS ===== */
.content-head .nav-buttons {
  display:flex;
  gap:8px;
  align-items:center;
}

.content-head button.arrow-btn{
  font-family:'Press Start 2P';
  background:#4e91ff;
  color:#fff;
  border:3px solid #1f4fb8;
  padding:6px 10px;
  border-radius:8px;
  box-shadow:
    0 3px 0 #16347a,
    0 4px 0 #0c1b3a;
  cursor:pointer;
  font-size:8px;
  transition:transform 0.1s, box-shadow 0.1s, background 0.1s;
}

.content-head button.arrow-btn:hover{
  transform:translateY(-2px);
  background:#6aa7ff;
  box-shadow:
    0 5px 0 #16347a,
    0 6px 0 #0c1b3a;
}

.content-head button.arrow-btn:active{
  transform:translateY(1px);
  background:#3f7aed;
  box-shadow:
    0 1px 0 #16347a,
    0 2px 0 #0c1b3a;
}

/* ===== PANELS ===== */
.panel-wrap{
  flex:1;
  position:relative;
}

.lesson-panel{
  position:absolute;
  inset:0;
  padding:16px;
  overflow:auto;
  display:none;
}

.lesson-panel.visible{display:block}

/* ===== LESSON CONTENT ===== */
.lesson-panel h1{
  font-size:14px;
  margin-bottom:6px;
}

.lesson-panel h2{
  font-size:11px;
  margin-bottom:8px;
}

.meta{
  font-size:8px;
  opacity:.7;
  margin-bottom:16px;
}

/* ===== BOXES ===== */
.explain{
  background:#fff3cd;
  border:3px solid #c9a227;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  line-height:1.6;
}

.code{
  background:#1e1e1e;
  color:#00ff90;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
  overflow:auto;
  position:relative;
}

.code pre{
  white-space:pre-wrap;
  word-break:break-word;
}

.demo{
  background:#d9ead3;
  border:3px solid #6aa84f;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
}

.examples{
  margin-left:16px;
}

.examples li{
  margin:6px 0;
}

/* ===== EDIT BUTTON ===== */
.code .edit-btn{
  position:absolute;
  top:10px;
  right:10px;
  background:#5c3a1a;
  color:#fff;
  border:none;
  padding:6px 8px;
  border-radius:8px;
  font-size:9px;
  cursor:pointer;
  box-shadow:0 4px 0 #3e2814;
}

/* ===== EDITOR MODAL ===== */
#editorModal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.5);
  z-index:1200;
}
#editorModal .modal{
  width:min(950px,95%);
  height:min(700px,95%);
  background:#0b1020;
  border-radius:12px;
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:8px;
  color:#e6f7ff;
  box-shadow:0 10px 40px rgba(0,0,0,.6);
  font-family:monospace;
}
#editorModal header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}
#editorModal .controls{display:flex;gap:8px;align-items:center;}
#editorModal button{
  font-family:inherit;
}
#editorModal textarea{
  width:100%;
  height:280px;
  background:#071018;
  color:#cfeefd;
  border:1px solid #27455b;
  padding:10px;
  border-radius:8px;
  resize:vertical;
  font-family:monospace;
  font-size:12px;
  line-height:1.4;
}
#editorModal .bottom{
  display:flex;
  gap:12px;
}
#editorModal .preview{
  flex:1;
  border:1px solid #27455b;
  border-radius:8px;
  overflow:hidden;
}
#errorBox{
  background:#3a1b1b;
  color:#ffd6d6;
  padding:8px;
  border-radius:6px;
  display:none;
  font-size:12px;
}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
  .app{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
  }
  #editorModal .modal{height:86vh}
}
</style>
</head>

<body>
<div class="app">

<aside class="sidebar">
  <div class="brand">
    <h1>ðŸ§  MindCraft</h1>
    <p>CSS Lesson 05</p>
  </div>

  <div class="lessons-list">

    <!-- ===== LESSON 5 ONLY (no arrow) ===== -->
    <script>
      const lessonsData=[
        {num:'05',title:'Dark Neon Typography Matrix',parts:['Font Families','Font Size','Line-height','Text-align','text-decoration','Font-weight','Google Fonts Integration','YOUR CHALLENGE!']}
      ];

      lessonsData.forEach((lesson,i)=>{
        document.write(`<button data-lesson="lesson-${i+1}-1" style="display:flex; align-items:center; justify-content:space-between;">
          <span><span class="num">${lesson.num}</span> ${lesson.title}</span>
        </button>`);
        
        document.write(`<div id="partsDropdown${i+1}" style="display:flex; flex-direction:column; gap:8px; margin-left: 30px; margin-top: 6px;">`);
        lesson.parts.forEach((part,j)=>{
          document.write(`<button data-lesson="lesson-${i+1}-${j+1}" style="font-size:8px; padding:6px 12px;">${part}</button>`);
        });
        document.write(`</div>`);
      });
    </script>

  </div>
</aside>

<main class="content">
  <div class="content-head">
    <a href="../../../Webside/Student.html" class="exit-btn" aria-label="Exit lessons">EXIT</a>
    <div class="title" id="panel-title">05 â€¢ Typography</div>
    <div class="nav-buttons">
      <button id="prevLesson" class="arrow-btn" aria-label="Previous lesson">â—€</button>
      <button id="nextLesson" class="arrow-btn" aria-label="Next lesson">â–¶</button>
    </div>
  </div>

  <div class="panel-wrap">

    <!-- ===== LESSON 5 PANELS ONLY ===== -->
    <script>
      lessonsData.forEach((lesson,i)=>{
        lesson.parts.forEach((part,j)=>{
          document.write(`<article id="lesson-${i+1}-${j+1}" class="lesson-panel">
            <h1>${lesson.title}</h1>
            <div class="meta">Lesson ${i+1} â€¢ Part ${j+1}</div>
            <h2>${('0'+(j+1)).slice(-2)}. ${part}</h2>
            <div class="explain"></div>
          </article>`);
        });
      });
    </script>

  </div>
</main>
</div>
 
<!-- EDITOR MODAL -->
<div id="editorModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-label="Code editor">
    <header>
      <div>
        <strong id="modalTitle">Edit Code</strong>
        <div id="errorBox"></div>
      </div>
      <div class="controls">
        <button id="applyBtn">Apply</button>
        <button id="closeEditor">Close</button>
      </div>
    </header>
    <textarea id="codeEditor" spellcheck="false"></textarea>
    <div style="display:flex;gap:8px;flex:1;min-height:220px;">
      <div style="flex:1;">
        <strong style="font-size:12px">Live Preview (editor)</strong>
        <div class="preview"><iframe id="previewFrame" style="width:100%;height:100%;border:0"></iframe></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ===============================
   LESSON CONTENT (Lesson 5 only)
=============================== */
const lessonContent = {
  "lesson-1-1": `
  <div class="explain">font-family sets the typeface. Use fallbacks. Example uses monospace and a Google font import suggestion.</div>
  <div class="code">
  <pre>body { font-family:'Press Start 2P', monospace; }
.heading { font-family: 'Orbitron', sans-serif; }</pre>
  </div>
  <div class="demo">
    <p style="font-family:'Press Start 2P',monospace">Press Start text (if loaded)</p>
    <h3 style="font-family:'Orbitron',sans-serif">Orbitron heading (example)</h3>
  </div>
  `,
  "lesson-1-2": `
  <div class="explain">font-size controls size. Use px, em, rem. Example shows scalable text.</div>
  <div class="code">
  <pre>.big { font-size:24px; }
.small { font-size:12px; }</pre>
  </div>
  <div class="demo">
    <p class="big" style="font-size:24px">Big text example</p>
    <p class="small" style="font-size:12px">Small text example</p>
  </div>
  `,
  "lesson-1-3": `
  <div class="explain">line-height adjusts spacing between lines. Good for readability.</div>
  <div class="code">
  <pre>.readable { line-height:1.8; max-width:36rem; }</pre>
  </div>
  <div class="demo">
    <p class="readable" style="line-height:1.8;">
      This paragraph demonstrates increased line-height which improves readability, especially with neon-styled text.
    </p>
  </div>
  `,
  "lesson-1-4": `
  <div class="explain">text-align positions inline text inside its container.</div>
  <div class="code">
  <pre>.centered { text-align:center; }</pre>
  </div>
  <div class="demo">
    <div class="centered" style="text-align:center">
      <h2>Centered heading</h2>
      <p>All text in this box is centered.</p>
    </div>
  </div>
  `,
  "lesson-1-5": `
  <div class="explain">text-decoration for underlines, overlines, and strikethroughs.</div>
  <div class="code">
  <pre>a { text-decoration:underline; color:#00f; }</pre>
  </div>
  <div class="demo">
    <a href="#" style="text-decoration:underline;color:#00f">Underlined link sample</a>
    <p><del>Strikethrough sample</del></p>
  </div>
  `,
  "lesson-1-6": `
  <div class="explain">font-weight makes text bolder. Numeric values 100-900. Example below.</div>
  <div class="code">
  <pre>.light { font-weight:300; } .bold { font-weight:900; }</pre>
  </div>
  <div class="demo">
    <p class="light" style="font-weight:300">Light text example</p>
    <p class="bold" style="font-weight:900">Bold text example</p>
  </div>
  `,
  "lesson-1-7": `
  <div class="explain">Import Google Fonts to enhance typography. Example import shown in code.</div>
  <div class="code">
  <pre>@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
h1 { font-family: 'Orbitron', sans-serif; }</pre>
  </div>
  <div class="demo">
    <h1 style="font-family:'Orbitron',sans-serif">Orbitron demo (if loaded)</h1>
  </div>
  `,
  "lesson-1-8": `
  <div class="explain">Combine font properties to make a Neon Text Showcase. Example provided.</div>
  <div class="code">
  <pre>.neon-text {
  font-family: 'Press Start 2P', monospace;
  font-size:20px;
  color:#0ff;
  text-shadow: 0 0 8px #0ff, 0 0 20px #ff00ff;
}</pre>
  </div>
  <div class="demo">
    <p class="neon-text" style="font-family:'Press Start 2P',monospace;font-size:20px;color:#0ff;text-shadow:0 0 8px #0ff,0 0 20px #ff00ff;">
      Neon Text Showcase
    </p>
  </div>
  `
}; /* end lessonContent */

/* ===============================
   After DOM ready: inject content, add edit buttons, wire navigation
=============================== */
document.addEventListener('DOMContentLoaded', () => {
  // inject lesson content
  const panels = document.querySelectorAll('.lesson-panel');
  panels.forEach(panel => {
    if (lessonContent[panel.id]) {
      panel.querySelector('.explain').innerHTML = lessonContent[panel.id];
    }
  });

  // add Edit buttons to each .code block
  document.querySelectorAll('.lesson-panel').forEach(panel=>{
    panel.querySelectorAll('.code').forEach(codeBlock=>{
      // avoid duplicating
      if (codeBlock.querySelector('.edit-btn')) return;
      const btn = document.createElement('button');
      btn.className = 'edit-btn';
      btn.textContent = 'Edit';
      codeBlock.appendChild(btn);

      btn.addEventListener('click', (e)=>{
        e.stopPropagation();
        openEditorForBlock(panel, codeBlock);
      });
    });
  });

  // wire up navigation (sidebar/arrow buttons)
  wireUpNavigation();

  // show first lesson
  showLesson('lesson-1-1');
});

/* ===============================
   Editor logic and helpers
=============================== */
const modal = document.getElementById('editorModal');
const codeEditor = document.getElementById('codeEditor');
const applyBtn = document.getElementById('applyBtn');
const closeEditor = document.getElementById('closeEditor');
const previewFrame = document.getElementById('previewFrame');
const modalTitle = document.getElementById('modalTitle');
const errorBox = document.getElementById('errorBox');

function decodeHtmlEntities(str){
  const textarea = document.createElement('textarea');
  textarea.innerHTML = str;
  return textarea.value;
}

function showError(msg){
  errorBox.style.display = 'block';
  errorBox.textContent = msg;
}
function clearError(){
  errorBox.style.display = 'none';
  errorBox.textContent = '';
}

function buildSrcdocFromCode(code){
  const reporter = `
    <script>
      (function(){
        window.addEventListener('error', function(e){
          parent.postMessage({type:'runtime-error', message: e.message, lineno: e.lineno, colno: e.colno}, '*');
        });
        window.addEventListener('unhandledrejection', function(e){
          parent.postMessage({type:'runtime-error', message: e.reason && e.reason.message ? e.reason.message : String(e.reason)}, '*');
        });
        const levels = ['log','warn','error','info'];
        levels.forEach(l=>{
          const orig = console[l];
          console[l] = function(...args){
            parent.postMessage({type:'console', level: l, args: args}, '*');
            orig.apply(console, args);
          }
        });
      })();
    <\/script>
  `;
  const trimmed = (code || '').trim();

  if (/<\/?html|<!doctype|<head|<body/i.test(trimmed)) {
    if (/<\/body>/i.test(trimmed)) {
      return trimmed.replace(/<\/body>/i, reporter + '</body>');
    }
    return trimmed + reporter;
  }

  const looksLikeCSS = /\{[^}]*:[^}]*\}/.test(trimmed) && !/<[a-z]/i.test(trimmed);
  if (looksLikeCSS) {
    return `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
      <style>${trimmed}</style>
      <style>html,body{margin:0;padding:12px;font-family:system-ui,Segoe UI,Roboto,Arial}</style>
      </head><body>
      <h1>Preview Heading</h1>
      <p>This is a sample paragraph to show your CSS styles.</p>
      <div class="example-box" style="padding:12px;border:1px dashed #999;margin-top:12px;">Example box</div>
      ${reporter}
      </body></html>`;
  }

  return `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>html,body{margin:0;padding:12px;font-family:system-ui,Segoe UI,Roboto,Arial}</style></head><body>${trimmed}${reporter}</body></html>`;
}

function openEditorForBlock(panel, codeBlock){
  modal.dataset.targetPanel = panel.id;
  modalTitle.textContent = 'Edit code â€” ' + (panel.querySelector('h2') ? panel.querySelector('h2').textContent : panel.id);
  clearError();

  const pre = codeBlock.querySelector('pre');
  const codeText = pre ? pre.innerText.trim() : '';
  codeEditor.value = decodeHtmlEntities(codeText);

  try {
    previewFrame.srcdoc = buildSrcdocFromCode(codeEditor.value);
  } catch (err) {
    showError('Preview failed: ' + err.message);
  }

  modal.style.display = 'flex';
  modal.setAttribute('aria-hidden', 'false');
  setTimeout(()=>codeEditor.focus(),120);
}

applyBtn.addEventListener('click', ()=>{
  const code = codeEditor.value;
  const panelId = modal.dataset.targetPanel;
  if (!panelId) return;
  const panel = document.getElementById(panelId);
  if (!panel) return;
  const pre = panel.querySelector('.code pre');
  if (pre) pre.innerText = code;

  try {
    const srcdoc = buildSrcdocFromCode(code);
    previewFrame.srcdoc = srcdoc;
    clearError();
  } catch (err) {
    showError('Apply preview failed: ' + err.message);
  }
});

closeEditor.addEventListener('click', ()=>{
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden', 'true');
  clearError();
  previewFrame.srcdoc = '<!doctype html><html><body></body></html>';
});

modal.addEventListener('click', (e)=>{
  if(e.target === modal){
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    clearError();
    previewFrame.srcdoc = '<!doctype html><html><body></body></html>';
  }
});

window.addEventListener('message', (ev)=>{
  if(!ev.data) return;
  if(ev.data.type === 'runtime-error'){
    showError('Runtime error: ' + ev.data.message + ' (line:'+ (ev.data.lineno||'n/a') +')');
  }
});

/* ===============================
   Navigation (sidebar + arrows)
=============================== */
function queryAll(selector){ return Array.from(document.querySelectorAll(selector)); }

const sideButtons = () => queryAll('.lessons-list > button');
const panelsAll  = () => queryAll('.lesson-panel');
const titleEl   = document.getElementById('panel-title');
const prevBtn = document.getElementById('prevLesson');
const nextBtn = document.getElementById('nextLesson');

function updateButtons() {
  const current = document.querySelector('.lesson-panel.visible');
  if(!current) return;
  const ids = current.id.split('-').map(Number);
  const lessonNum = ids[1];
  const partNum = ids[2];
  const parts = lessonsData[lessonNum - 1].parts.length;
  prevBtn.style.display = partNum === 1 ? 'none' : 'inline-block';
  nextBtn.style.display = partNum === parts ? 'none' : 'inline-block';
}

function showLesson(id) {
  panelsAll().forEach(p => p.classList.remove('visible'));
  sideButtons().forEach(b => b.classList.remove('active'));
  const panel = document.getElementById(id);
  if(!panel) return;
  panel.classList.add('visible');
  const mainId = id.split('-').slice(0, 2).join('-') + '-1';
  const mainBtn = document.querySelector(`[data-lesson="${mainId}"]`);
  if (mainBtn) mainBtn.classList.add('active');
  const metaEl = panel.querySelector('.meta');
  const partText = metaEl ? (metaEl.textContent.split('â€¢')[1] || '').trim() : '';
  titleEl.textContent = (panel.querySelector('h1') ? panel.querySelector('h1').textContent : '') + (partText ? ' â€¢ ' + partText : '');
  updateButtons();
}

function wireUpNavigation(){
  sideButtons().forEach(btn => {
    btn.addEventListener('click', () => {
      if (btn.dataset.lesson) {
        showLesson(btn.dataset.lesson);
      }
    });
  });

  prevBtn.onclick = () => {
    const current = document.querySelector('.lesson-panel.visible');
    if(!current) return;
    const [_, lessonNum, partNum] = current.id.split('-').map(Number);
    if (partNum > 1) {
      showLesson(`lesson-${lessonNum}-${partNum - 1}`);
    }
  };

  nextBtn.onclick = () => {
    const current = document.querySelector('.lesson-panel.visible');
    if(!current) return;
    const [_, lessonNum, partNum] = current.id.split('-').map(Number);
    const totalParts = lessonsData[lessonNum - 1].parts.length;
    if (partNum < totalParts) {
      showLesson(`lesson-${lessonNum}-${partNum + 1}`);
    }
  };
}

if(document.readyState === 'complete' || document.readyState === 'interactive'){
  wireUpNavigation();
} else {
  document.addEventListener('DOMContentLoaded', wireUpNavigation);
}

// dropdown always visible, no toggle
lessonsData.forEach((lesson, i) => {
    const dropdown = document.getElementById(`partsDropdown${i + 1}`);
    if (!dropdown) return;

    dropdown.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        showLesson(btn.dataset.lesson);
      });
    });
  });

showLesson('lesson-1-1');

</script>

</body>
</html>
