<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up - MindCraft</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../Design/Position.css">
<style>
body {Â 
Â  Â  font-family: 'Poppins', sans-serif;Â 
Â  Â  text-align: center;Â 
Â  Â  background: #203a43;Â 
Â  Â  color: white;Â 
}
input {Â 
Â  Â  padding: 10px;Â 
Â  Â  width: 70%;Â 
Â  Â  margin: 10px;Â 
Â  Â  border-radius: 8px;Â 
Â  Â  border: none;Â 
}
button {Â 
Â  Â  padding: 10px 20px;Â 
Â  Â  border: none;Â 
Â  Â  border-radius: 8px;Â 
Â  Â  background: #1DB954;Â 
Â  Â  color: white;Â 
Â  Â  cursor: pointer;Â 
}
button:hover { background: #1ed760; }
.message { margin: 10px; color: #ff5252; }
</style>
</head>
<body>

<h2>ðŸ§  MindCraft - Sign Up</h2>
<form id="signupForm">
Â  <input type="text" id="username" placeholder="Enter username" required><br>
Â  <input type="password" id="password" placeholder="Enter password" required><br>
Â  <button type="submit">Create Account</button>
</form>
<p class="message" id="message"></p>
<p>Already have an account? <a href="signin.html" style="color:#1DB954;">Sign in here</a>.</p>

<script src="../Design/theme.js"></script>

<script>
// Initialize users in localStorage if not exist
if (!localStorage.getItem('users')) {
Â  Â  localStorage.setItem('users', JSON.stringify([]));
}

const form = document.getElementById('signupForm');
const messageEl = document.getElementById('message');

form.addEventListener('submit', function(e) {
Â  Â  e.preventDefault();

Â  Â  const username = document.getElementById('username').value.trim();
Â  Â  const password = document.getElementById('password').value;

Â  Â  let users = JSON.parse(localStorage.getItem('users') || '[]');

Â  Â  // Check if username exists
Â  Â  if (users.some(u => u.username === username)) {
Â  Â  Â  Â  messageEl.textContent = "âŒ Username already exists!";
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  // Add new user to the generic 'users' array
Â  Â  users.push({ username, password, level: 1, xp: 0 });
Â  Â  localStorage.setItem('users', JSON.stringify(users));

    // â­ FIX: Initialize user-specific keys for the XP/Level system
    localStorage.setItem(`${username}_level`, 1);
    localStorage.setItem(`${username}_xp`, 0);
    localStorage.setItem(`${username}_xpMax`, 100);

Â  Â  messageEl.style.color = "#1DB954";
Â  Â  messageEl.textContent = "âœ… Account created! Redirecting to sign in...";

Â  Â  // Optional: redirect after 1.5 seconds
Â  Â  setTimeout(() => {
Â  Â  Â  Â  window.location.href = 'signin.html';
Â  Â  }, 1500);
});
</script>

</body>
</html>
